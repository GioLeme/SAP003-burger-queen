{"ast":null,"code":"import _objectSpread from \"/home/giovannasouto/Desktop/lab/burguer-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/giovannasouto/Desktop/lab/burguer-queen/src/components/resume/resume.js\";\nimport React, { Component } from 'react';\nimport Counter from '../counter/counter';\nimport fire from '../../config/firebase';\nimport moment from 'moment';\n\nclass Resume extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      request: []\n    };\n\n    this.getItemLocalStorage = () => JSON.parse(localStorage.getItem('request'));\n\n    this.loadProducts = () => {\n      return this.state.request.products.map((actualProduct, index) => React.createElement(\"li\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, actualProduct.quantity, actualProduct.name, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, actualProduct.options ? `'Hambúrguer' ${actualProduct.options}` : '', actualProduct.extras ? actualProduct.extras.name : ''), \"R$\", actualProduct.extras ? actualProduct.price + actualProduct.extras.price : actualProduct.price * actualProduct.quantity, \" ,00\", React.createElement(\"span\", {\n        onClick: this.updateRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }, React.createElement(Counter, {\n        isResume: true,\n        name: actualProduct.name,\n        price: actualProduct.price,\n        options: actualProduct.options,\n        extras: actualProduct.extras,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 28\n        },\n        __self: this\n      }))));\n    };\n\n    this.updateRequest = () => {\n      this.setState({\n        request: this.getItemLocalStorage()\n      });\n    };\n\n    this.sum = () => {\n      return this.state.request.products.reduce((LastSumProduct, actualProduct) => {\n        if (actualProduct.extras && actualProduct.extras.price) {\n          return (LastSumProduct + actualProduct.price + actualProduct.extras.price) * actualProduct.quantity;\n        }\n\n        return (LastSumProduct + actualProduct.price) * actualProduct.quantity;\n      }, 0);\n    };\n\n    this.sendRequestToFirebase = () => {\n      console.log('moment', new Date());\n      fire.firestore().collection('requests').doc().set(_objectSpread({}, this.state.request, {\n        createdAt: moment(),\n        status: 'toDo'\n      }));\n    };\n  }\n\n  componentWillMount() {\n    this.updateRequest();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Resumo\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, this.loadProducts().length > 0 ? this.loadProducts() : 'O pedido está vazio!', React.createElement(\"button\", {\n      disabled: !this.loadProducts().length,\n      onClick: this.sendRequestToFirebase,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Enviar pedido para a cozinha\")), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Total: \", this.sum()));\n  }\n\n}\n\nexport default Resume;","map":{"version":3,"sources":["/home/giovannasouto/Desktop/lab/burguer-queen/src/components/resume/resume.js"],"names":["React","Component","Counter","fire","moment","Resume","constructor","props","state","request","getItemLocalStorage","JSON","parse","localStorage","getItem","loadProducts","products","map","actualProduct","index","quantity","name","options","extras","price","updateRequest","setState","sum","reduce","LastSumProduct","sendRequestToFirebase","console","log","Date","firestore","collection","doc","set","createdAt","status","componentWillMount","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Counter from '../counter/counter';\nimport fire from '../../config/firebase';\nimport moment from 'moment';\n\nclass Resume extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            request: []\n        }\n\n        this.getItemLocalStorage = () => (\n            JSON.parse(localStorage.getItem('request'))\n          )\n\n\n        this.loadProducts = () => {\n            return this.state.request.products.map((actualProduct, index) => (\n                <li key={index}>\n                {actualProduct.quantity}\n                {actualProduct.name}\n                <div>\n                {actualProduct.options ? `'Hambúrguer' ${actualProduct.options}` : ''}\n                {actualProduct.extras ? actualProduct.extras.name : ''}\n                </div>\n                R${actualProduct.extras ? actualProduct.price + actualProduct.extras.price : actualProduct.price * actualProduct.quantity } ,00\n                <span onClick={this.updateRequest} ><Counter isResume={true} name={actualProduct.name} price={actualProduct.price} options={actualProduct.options} extras={actualProduct.extras} /></span>\n                </li>\n                ))   \n        }\n\n        this.updateRequest=() => {\n            this.setState({request: this.getItemLocalStorage()}) \n        }\n\n        this.sum = () => {\n            return this.state.request.products.reduce((LastSumProduct, actualProduct) => {\n               if (actualProduct.extras && actualProduct.extras.price) {\n                   return ((LastSumProduct + actualProduct.price) + actualProduct.extras.price) * actualProduct.quantity\n               } \n               return (LastSumProduct + actualProduct.price) * actualProduct.quantity\n            }, 0)\n        }\n\n        this.sendRequestToFirebase = () => {\n            console.log('moment', new Date())\n            fire.firestore().collection('requests').doc().set(\n                {...this.state.request,\n                createdAt: moment(),\n                status: 'toDo' \n                }\n            );\n        }\n\n        \n    }\n\n    componentWillMount(){\n        this.updateRequest() \n    }\n\n    render(){\n        return(\n            <div>\n                <h1>Resumo</h1>\n                <ul>\n                {this.loadProducts().length > 0 ? this.loadProducts() : 'O pedido está vazio!' }\n                {/* <button disabled={!this.loadProducts().length}>Cancelar pedido</button> */}\n                <button disabled={!this.loadProducts().length} onClick={this.sendRequestToFirebase}>Enviar pedido para a cozinha</button>\n                </ul>\n                <h3>Total: {this.sum()}</h3>\n            </div>\n        )\n    }\n\n}\n\nexport default Resume;\n\n"]},"metadata":{},"sourceType":"module"}