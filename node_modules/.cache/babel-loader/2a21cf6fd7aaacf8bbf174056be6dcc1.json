{"ast":null,"code":"import _objectSpread from \"/home/giovannasouto/Desktop/lab/burguer-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/giovannasouto/Desktop/lab/burguer-queen/src/components/cooker/cooker.js\";\nimport React, { Component } from 'react';\nimport fire from 'firebase';\nimport Button from '@material-ui/core/Button';\nimport moment from 'moment';\nimport './cooker.css';\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport WarningIcon from '@material-ui/icons/Warning';\n\nclass CookerComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestList: [],\n      requestStatus: ''\n    };\n\n    this.getRequestFirebase = () => {\n      return fire.firestore().collection('requests').get().then(request => {\n        const requestList = [];\n        request.forEach(doc => requestList.push(_objectSpread({}, doc.data(), {\n          id: doc.id\n        })));\n        this.setState({\n          requestList: requestList.filter(request => request.status !== 'done' && request.status !== 'delivered')\n        });\n      }).catch(err => err);\n    };\n\n    this.getUserId = () => fire.auth().currentUser.uid;\n\n    this.updateRequest = async (id, status) => {\n      await fire.firestore().collection('requests').doc(id).update({\n        status,\n        cookerId: this.getUserId()\n      });\n      this.getRequestFirebase();\n    };\n\n    this.buttonName = request => {\n      const userId = this.getUserId();\n\n      if (request.status === 'toDo') {\n        return React.createElement(Button, {\n          style: {\n            backgroundColor: '#7ed957',\n            width: '70%'\n          },\n          onClick: () => this.updateRequest(request.id, 'doing'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, \" Preparar\");\n      }\n\n      if (request.status === 'doing' && request.cookerId !== userId) {\n        return React.createElement(Button, {\n          disabled: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, \" Em preparo...\");\n      }\n\n      if (request.status === 'doing' && request.cookerId === userId) {\n        return React.createElement(Button, {\n          onClick: () => this.updateRequest(request.id, 'done'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        }, \" Pronto pra entrega!\");\n      }\n    };\n\n    this.createRestaurantManager = () => {\n      return this.state.requestList.map((actualRequest, actualIndex) => {\n        const timeStatus = this.getRequestStatus(this.getTime(actualRequest.createdAt));\n        return React.createElement(\"div\", {\n          key: actualIndex,\n          className: timeStatus + ' ' + 'restaurant-manager',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"Mesa \", actualRequest.table), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, this.statusIcon(timeStatus), \" \", this.getTime(actualRequest.createdAt))), actualRequest.products.map((arrRequest, index) => React.createElement(\"div\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"request\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, \" \", arrRequest.quantity, \"  \", arrRequest.name, \" \")), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \" \", arrRequest.options || '', \"  \", arrRequest.extras ? arrRequest.extras.name : '', \" \")))), React.createElement(\"div\", {\n          className: \"button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, timeStatus === 'late' ? 'Atrasado' : ''), this.buttonName(actualRequest)));\n      });\n    };\n\n    this.getTime = time => {\n      const startTime = moment(time, 'DD/MM/YYYY HH:mm');\n      const now = moment().add(2, 'hours');\n      return moment(moment(now).diff(startTime, 'HH:mm')).format('HH:mm');\n    };\n\n    this.getRequestStatus = time => {\n      const minutes = time.slice(-2);\n      const hour = time.slice(1, 2);\n      const handleMinutes = Number(minutes);\n      const handleHours = Number(hour);\n\n      if (handleHours > 0 || handleMinutes > 15) {\n        return 'late';\n      }\n\n      if (handleMinutes >= 0 && handleMinutes <= 10) {\n        return 'ok';\n      }\n\n      if (handleMinutes >= 11 && handleMinutes <= 15) {\n        return 'warning';\n      }\n    };\n\n    this.statusIcon = status => {\n      if (status === 'late') {\n        return React.createElement(SentimentVeryDissatisfiedIcon, {\n          style: {\n            fill: '#f57970'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        });\n      }\n\n      if (status === 'warning') {\n        return React.createElement(WarningIcon, {\n          style: {\n            fill: '#ffcc4d'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        });\n      }\n\n      if (status === 'ok') {\n        return React.createElement(CheckCircleOutlineIcon, {\n          style: {\n            fill: '#7ed957'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        });\n      }\n    };\n  }\n\n  async componentWillMount() {\n    await this.getRequestFirebase();\n    setInterval(async () => {\n      await this.getRequestFirebase();\n    }, 30000);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"manager\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, this.createRestaurantManager());\n  }\n\n}\n\nexport default CookerComponent;","map":{"version":3,"sources":["/home/giovannasouto/Desktop/lab/burguer-queen/src/components/cooker/cooker.js"],"names":["React","Component","fire","Button","moment","SentimentVeryDissatisfiedIcon","CheckCircleOutlineIcon","WarningIcon","CookerComponent","constructor","props","state","requestList","requestStatus","getRequestFirebase","firestore","collection","get","then","request","forEach","doc","push","data","id","setState","filter","status","catch","err","getUserId","auth","currentUser","uid","updateRequest","update","cookerId","buttonName","userId","backgroundColor","width","createRestaurantManager","map","actualRequest","actualIndex","timeStatus","getRequestStatus","getTime","createdAt","table","statusIcon","products","arrRequest","index","quantity","name","options","extras","time","startTime","now","add","diff","format","minutes","slice","hour","handleMinutes","Number","handleHours","fill","componentWillMount","setInterval","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport fire from 'firebase';\nimport Button from '@material-ui/core/Button';\nimport moment from 'moment';\nimport './cooker.css'\nimport SentimentVeryDissatisfiedIcon from '@material-ui/icons/SentimentVeryDissatisfied';\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\nimport WarningIcon from '@material-ui/icons/Warning';\n\n\n\nclass CookerComponent extends Component{\n    constructor(props){\n        super(props)\n        this.state={\n            requestList: [],\n            requestStatus: ''         \n        }\n\n        this.getRequestFirebase = () => {\n            return fire.firestore().collection('requests')\n            .get()\n            .then((request) => {\n                const requestList = []\n                request.forEach(doc => requestList.push({...doc.data(), id: doc.id}) )\n                this.setState({requestList: requestList.filter(request => request.status !== 'done' && request.status !== 'delivered')})\n            })\n            .catch(err => err)\n        }\n\n        this.getUserId = () => (\n            fire.auth().currentUser.uid\n        )\n\n        this.updateRequest = async (id , status) => {          \n            await fire.firestore().collection('requests').doc(id).update({\n                status,\n                cookerId: this.getUserId()\n            })\n                this.getRequestFirebase()\n        }\n\n        this.buttonName = (request) => {\n            const userId = this.getUserId()\n            if(request.status === 'toDo') {\n                return <Button style={{backgroundColor:'#7ed957' , width: '70%' }} onClick= {() => this.updateRequest(request.id, 'doing' )}> Preparar</Button>\n            }\n            if(request.status === 'doing' && request.cookerId !== userId){\n                return <Button disabled> Em preparo...</Button>\n            }\n            if(request.status === 'doing' && request.cookerId === userId) {\n                return <Button onClick={() => this.updateRequest(request.id, 'done' )}> Pronto pra entrega!</Button>                \n            }\n           \n        }\n        this.createRestaurantManager = () => {\n             return this.state.requestList.map((actualRequest, actualIndex) => { \n                 const timeStatus = this.getRequestStatus(this.getTime(actualRequest.createdAt))\n                 return <div key={actualIndex} className= { timeStatus + ' ' + 'restaurant-manager'}>\n                     <div className='info'>\n                    <p>Mesa {actualRequest.table}</p>\n                    <p>{this.statusIcon(timeStatus)} { this.getTime(actualRequest.createdAt)}</p>\n                    </div>\n                {actualRequest.products.map((arrRequest, index) => (\n                     <div key={index}  >\n                     <div className='request'>\n                     <p> {arrRequest.quantity}  {arrRequest.name} </p>\n                     </div>\n                     <div>\n                     <p> {arrRequest.options || ''}  {arrRequest.extras ? arrRequest.extras.name : ''} </p>\n                     </div>\n                     </div>\n                ))}\n                   <div className='button'>\n                    <p>{timeStatus === 'late' ? 'Atrasado' : ''}</p>\n                       {this.buttonName(actualRequest)}  \n                       </div>\n                 </div>\n             })\n        }\n\n        this.getTime=(time) => {\n            const startTime = moment(time, 'DD/MM/YYYY HH:mm')\n            const now = moment().add(2, 'hours')\n            return moment(moment(now).diff(startTime, 'HH:mm')).format('HH:mm') \n           \n        }\n\n       this.getRequestStatus = (time) => {\n            const minutes =  time.slice(-2)\n            const hour = time.slice(1, 2)\n            const handleMinutes = Number(minutes)\n            const handleHours = Number(hour)\n            if(handleHours > 0 || handleMinutes > 15){\n             return 'late' \n            }\n            if(handleMinutes >= 0 && handleMinutes <= 10){\n               return 'ok'\n\n             }\n             if(handleMinutes >= 11 && handleMinutes <= 15){\n                return 'warning'\n\n            }\n            \n        }\n\n        this.statusIcon= (status) => {\n            if (status === 'late'){\n               return <SentimentVeryDissatisfiedIcon style={{fill:'#f57970' }}/>\n            }\n            if (status === 'warning') {\n                return <WarningIcon style={{fill:'#ffcc4d'}} />\n            }\n            if (status === 'ok'){\n                return <CheckCircleOutlineIcon style={{fill:'#7ed957'}}/>\n            }\n        }\n    }\n\n    async componentWillMount(){\n        await this.getRequestFirebase()\n        setInterval(async () => {\n            await this.getRequestFirebase()    \n        }, 30000);\n    }    \n\n    render(){\n        return(\n            <div className='manager'>\n                {this.createRestaurantManager()}\n\n            </div>\n        )\n    }\n}\n\n\nexport default CookerComponent\n"]},"metadata":{},"sourceType":"module"}