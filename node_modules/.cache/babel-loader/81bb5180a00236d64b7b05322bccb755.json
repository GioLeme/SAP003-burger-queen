{"ast":null,"code":"import _objectSpread from \"/home/giovannasouto/Desktop/lab/burguer-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/giovannasouto/Desktop/lab/burguer-queen/src/components/cooker/cooker.js\";\nimport React, { Component } from 'react';\nimport fire from 'firebase';\nimport Button from '@material-ui/core/Button';\nimport moment from 'moment';\n\nclass CookerComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      requestList: []\n    };\n\n    this.getRequestFirebase = () => {\n      return fire.firestore().collection('requests').get().then(request => {\n        const requestList = [];\n        request.forEach(doc => requestList.push(_objectSpread({}, doc.data(), {\n          id: doc.id\n        })));\n        this.setState({\n          requestList: requestList.filter(request => request.status !== 'done')\n        });\n      }).catch(err => err);\n    };\n\n    this.getUserId = () => fire.auth().currentUser.uid;\n\n    this.updateRequest = async (id, status) => {\n      await fire.firestore().collection('requests').doc(id).update({\n        status,\n        cookerId: this.getUserId()\n      });\n      this.getRequestFirebase();\n    };\n\n    this.buttonName = request => {\n      const userId = this.getUserId();\n\n      if (request.status === 'toDo') {\n        return React.createElement(Button, {\n          onClick: () => this.updateRequest(request.id, 'doing'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        }, \" Preparar\");\n      }\n\n      if (request.status === 'doing' && request.cookerId !== userId) {\n        return React.createElement(Button, {\n          disabled: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, \" Em preparo...\");\n      }\n\n      if (request.status === 'doing' && request.cookerId === userId) {\n        return React.createElement(Button, {\n          onClick: () => this.updateRequest(request.id, 'done'),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, \" Pronto pra entrega!\");\n      }\n    };\n\n    this.createRestaurantManager = () => {\n      return this.state.requestList.map((actualRequest, actualIndex) => React.createElement(\"div\", {\n        key: actualIndex,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, actualRequest.products.map((arrRequest, index) => React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, this.timer(actualRequest.createdAt)), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Mesa \", actualRequest.table), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \" \", arrRequest.quantity, \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, \" \", arrRequest.name, \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \" \", arrRequest.options || '', \" \"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \" \", arrRequest.extras ? arrRequest.extras.name : '', \" \"))), this.buttonName(actualRequest)));\n    };\n\n    this.timer = time => {\n      const startTime = moment(time, 'DD/MM/YYYY HH:mm');\n      const now = moment(moment().add(1, 'hours').format('DD/MM/YYYY HH:mm'), 'DD/MM/YYYY HH:mm');\n      console.log('startTime', startTime);\n      console.log('now', now);\n      const diff = moment(moment(now).diff(startTime, 'HH:mm')).format('HH:mm');\n      console.log('diff', diff);\n      return diff; // const diffHour = moment().diff(moment(time, 'HH:mm'), 'hours').subtract(3, 'hours');\n      // const diffMinute = moment().diff(moment(time, 'HH:mm'), 'minutes');\n      // return `${moment(diffHour).format('HH')} : ${moment(diffMinute).format('mm')} `\n    };\n  }\n\n  componentWillMount() {\n    this.getRequestFirebase();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, this.createRestaurantManager());\n  }\n\n}\n\nexport default CookerComponent;","map":{"version":3,"sources":["/home/giovannasouto/Desktop/lab/burguer-queen/src/components/cooker/cooker.js"],"names":["React","Component","fire","Button","moment","CookerComponent","constructor","props","state","requestList","getRequestFirebase","firestore","collection","get","then","request","forEach","doc","push","data","id","setState","filter","status","catch","err","getUserId","auth","currentUser","uid","updateRequest","update","cookerId","buttonName","userId","createRestaurantManager","map","actualRequest","actualIndex","products","arrRequest","index","timer","createdAt","table","quantity","name","options","extras","time","startTime","now","add","format","console","log","diff","componentWillMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport fire from 'firebase';\nimport Button from '@material-ui/core/Button';\nimport moment from 'moment';\n\n\n\nclass CookerComponent extends Component{\n    constructor(props){\n        super(props)\n        this.state={\n            requestList: []            \n        }\n\n        this.getRequestFirebase = () => {\n            return fire.firestore().collection('requests')\n            .get()\n            .then((request) => {\n                const requestList = []\n                request.forEach(doc => requestList.push({...doc.data(), id: doc.id}) )\n                this.setState({requestList: requestList.filter(request => request.status !== 'done')})\n            })\n            .catch(err => err)\n        }\n\n        this.getUserId = () => (\n            fire.auth().currentUser.uid\n        )\n\n        this.updateRequest = async (id , status) => {          \n            await fire.firestore().collection('requests').doc(id).update({\n                status,\n                cookerId: this.getUserId()\n            })\n                this.getRequestFirebase()\n        }\n\n        this.buttonName = (request) => {\n            const userId = this.getUserId()\n            if(request.status === 'toDo') {\n                return <Button onClick= {() => this.updateRequest(request.id, 'doing' )}> Preparar</Button>\n            }\n            if(request.status === 'doing' && request.cookerId !== userId){\n                return <Button disabled> Em preparo...</Button>\n            }\n            if(request.status === 'doing' && request.cookerId === userId) {\n                return <Button onClick={() => this.updateRequest(request.id, 'done' )}> Pronto pra entrega!</Button>                \n            }\n        }\n\n        \n\n        \n\n        this.createRestaurantManager = () => {\n             return this.state.requestList.map((actualRequest, actualIndex) => (\n                 <div key={actualIndex}>\n                {actualRequest.products.map((arrRequest, index) => (\n                     <div key={index}>\n                    <p>{this.timer(actualRequest.createdAt)}</p>\n                     <p>Mesa {actualRequest.table}</p>\n                     <p> {arrRequest.quantity} </p>\n                     <p> {arrRequest.name} </p>\n                     <p> {arrRequest.options || ''} </p>\n                     <p> {arrRequest.extras ? arrRequest.extras.name : ''} </p>\n                     </div>\n                ))}\n                     {this.buttonName(actualRequest)}                 \n                 </div>\n             ))\n        }\n\n        this.timer=(time) => {\n            const startTime = moment(time, 'DD/MM/YYYY HH:mm')\n            const now = moment(moment().add(1, 'hours').format('DD/MM/YYYY HH:mm'), 'DD/MM/YYYY HH:mm')\n            console.log('startTime', startTime)\n            console.log('now', now)\n            const diff = moment(moment(now).diff(startTime, 'HH:mm')).format('HH:mm')\n            console.log('diff', diff)\n            return diff\n            // const diffHour = moment().diff(moment(time, 'HH:mm'), 'hours').subtract(3, 'hours');\n            // const diffMinute = moment().diff(moment(time, 'HH:mm'), 'minutes');\n            // return `${moment(diffHour).format('HH')} : ${moment(diffMinute).format('mm')} `\n        }\n    }\n\n    componentWillMount(){\n        this.getRequestFirebase()\n    }\n\n    render(){\n        return(\n            <div>\n                {this.createRestaurantManager()}\n\n            </div>\n        )\n    }\n}\n\n\nexport default CookerComponent\n"]},"metadata":{},"sourceType":"module"}