{"ast":null,"code":"import _objectSpread from \"/home/giovannasouto/Desktop/lab/burguer-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/giovannasouto/Desktop/lab/burguer-queen/src/components/resume/resume.js\";\nimport React, { Component } from 'react';\nimport Counter from '../counter/counter';\nimport fire from '../../config/firebase';\nimport { withRouter } from 'react-router-dom';\nimport moment from 'moment';\nimport SweetAlert from 'sweetalert2-react';\nimport './resume.css';\n\nclass Resume extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      request: [],\n      show: false\n    };\n\n    this.getItemLocalStorage = () => JSON.parse(localStorage.getItem('request'));\n\n    this.loadProducts = () => {\n      return this.state.request.products.map((actualProduct, index) => React.createElement(\"li\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"request-resume\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26\n        },\n        __self: this\n      }, actualProduct.quantity, actualProduct.name, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, actualProduct.options ? `'Hambúrguer' ${actualProduct.options}` : '', actualProduct.extras ? actualProduct.extras.name : ''), \"R$\", actualProduct.extras ? actualProduct.price + actualProduct.extras.price : actualProduct.price * actualProduct.quantity, \" ,00\"), React.createElement(\"span\", {\n        onClick: this.updateRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }, React.createElement(Counter, {\n        isResume: true,\n        name: actualProduct.name,\n        price: actualProduct.price,\n        options: actualProduct.options,\n        extras: actualProduct.extras,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35\n        },\n        __self: this\n      }))));\n    };\n\n    this.updateRequest = () => {\n      this.setState({\n        request: this.getItemLocalStorage()\n      });\n    };\n\n    this.sum = () => {\n      return this.state.request.products.reduce((LastSumProduct, actualProduct) => {\n        if (actualProduct.extras && actualProduct.extras.price) {\n          return (LastSumProduct + actualProduct.price + actualProduct.extras.price) * actualProduct.quantity;\n        }\n\n        return (LastSumProduct + actualProduct.price) * actualProduct.quantity;\n      }, 0);\n    };\n\n    this.sendRequestToFirebase = () => {\n      fire.firestore().collection('requests').doc().set(_objectSpread({}, this.state.request, {\n        createdAt: moment().subtract(1, 'hours').format('DD/MM/YYYY  HH:mm:ss'),\n        status: 'toDo'\n      })).then(() => {\n        localStorage.removeItem('request');\n        this.setState({\n          show: true\n        });\n        setTimeout(() => {\n          this.setState({\n            show: false\n          });\n          this.props.history.push('/');\n        }, 1700);\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.updateRequest();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"resume-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title-resume\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Resumo\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, this.loadProducts().length > 0 ? this.loadProducts() : 'O pedido está vazio!', React.createElement(\"button\", {\n      disabled: !this.loadProducts().length,\n      onClick: this.sendRequestToFirebase,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Enviar pedido para a cozinha\")), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Total: \", this.sum()), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(SweetAlert, {\n      show: this.state.show,\n      type: \"success\",\n      title: \"Pedido Enviado\",\n      showConfirmButton: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default withRouter(Resume);","map":{"version":3,"sources":["/home/giovannasouto/Desktop/lab/burguer-queen/src/components/resume/resume.js"],"names":["React","Component","Counter","fire","withRouter","moment","SweetAlert","Resume","constructor","props","state","request","show","getItemLocalStorage","JSON","parse","localStorage","getItem","loadProducts","products","map","actualProduct","index","quantity","name","options","extras","price","updateRequest","setState","sum","reduce","LastSumProduct","sendRequestToFirebase","firestore","collection","doc","set","createdAt","subtract","format","status","then","removeItem","setTimeout","history","push","componentWillMount","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Counter from '../counter/counter';\nimport fire from '../../config/firebase';\nimport { withRouter } from 'react-router-dom';\n\nimport moment from 'moment';\nimport SweetAlert from 'sweetalert2-react';\nimport './resume.css'\n\nclass Resume extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            request: [],\n            show: false\n        }\n\n        this.getItemLocalStorage = () => (\n            JSON.parse(localStorage.getItem('request'))\n          )\n\n\n        this.loadProducts = () => {\n            return this.state.request.products.map((actualProduct, index) => (\n                <li key={index} >\n                    <div className='request-resume'>\n                {actualProduct.quantity}\n                {actualProduct.name}\n                <div>\n                {actualProduct.options ? `'Hambúrguer' ${actualProduct.options}` : ''}\n                {actualProduct.extras ? actualProduct.extras.name : ''}\n                </div>\n                R${actualProduct.extras ? actualProduct.price + actualProduct.extras.price : actualProduct.price * actualProduct.quantity } ,00\n                </div>\n                <span onClick={this.updateRequest} ><Counter isResume={true} name={actualProduct.name} price={actualProduct.price} options={actualProduct.options} extras={actualProduct.extras} /></span>\n                </li>\n                ))   \n        }\n\n        this.updateRequest=() => {\n            this.setState({request: this.getItemLocalStorage()}) \n        }\n\n        this.sum = () => {\n            return this.state.request.products.reduce((LastSumProduct, actualProduct) => {\n               if (actualProduct.extras && actualProduct.extras.price) {\n                   return ((LastSumProduct + actualProduct.price) + actualProduct.extras.price) * actualProduct.quantity\n               } \n               return (LastSumProduct + actualProduct.price) * actualProduct.quantity\n            }, 0)\n        }\n\n        this.sendRequestToFirebase = () => {\n            fire.firestore().collection('requests').doc().set(\n                {...this.state.request,\n                createdAt: moment().subtract(1, 'hours').format('DD/MM/YYYY  HH:mm:ss'),\n                status: 'toDo'\n                }\n            ).then( () => {\n                localStorage.removeItem('request') \n                this.setState({show: true})\n                setTimeout(() => {\n                    this.setState({show: false})\n                    this.props.history.push('/')\n                }, 1700)\n                \n            })\n        }\n\n        \n    }\n\n    componentWillMount(){\n        this.updateRequest() \n    }\n\n    render(){\n        return(\n            <div className='resume-container'>\n                <h1 className='title-resume'>Resumo</h1>\n                <ul>\n                {this.loadProducts().length > 0 ? this.loadProducts() : 'O pedido está vazio!' }\n                {/* <button disabled={!this.loadProducts().length}>Cancelar pedido</button> */}\n                <button disabled={!this.loadProducts().length} onClick={this.sendRequestToFirebase}>Enviar pedido para a cozinha</button>\n                </ul>\n                <h3>Total: {this.sum()}</h3>\n\n                <div>\n                    <SweetAlert\n                        show={this.state.show}\n                        type = 'success'\n                        title='Pedido Enviado'\n                        showConfirmButton={false}\n                    />\n                 </div>\n             </div>\n        )\n    }\n\n}\n\nexport default withRouter(Resume);\n\n"]},"metadata":{},"sourceType":"module"}