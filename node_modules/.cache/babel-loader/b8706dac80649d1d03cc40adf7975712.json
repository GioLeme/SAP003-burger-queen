{"ast":null,"code":"import _objectSpread from \"/home/giovannasouto/Desktop/lab/SAP003-burger-queen/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/home/giovannasouto/Desktop/lab/SAP003-burger-queen/src/components/resume/resume.js\";\nimport React, { Component } from \"react\";\nimport Counter from \"../counter/counter\";\nimport fire from \"../../config/firebase\";\nimport { withRouter } from \"react-router-dom\";\nimport moment from \"moment\";\nimport SweetAlert from \"sweetalert2-react\";\nimport \"./resume.css\";\n\nclass Resume extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      request: [],\n      show: false\n    };\n\n    this.getItemLocalStorage = () => JSON.parse(localStorage.getItem(\"request\"));\n\n    this.loadProducts = () => {\n      return this.state.request.products.map((actualProduct, index) => React.createElement(\"li\", {\n        key: index,\n        className: \"request-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"request-resume-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, actualProduct.quantity, actualProduct.name, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27\n        },\n        __self: this\n      }, actualProduct.options ? `'Hambúrguer' ${actualProduct.options}` : \"\", actualProduct.extras ? actualProduct.extras.name : \"\"), \"R$\", \" \", actualProduct.extras ? actualProduct.price + actualProduct.extras.price : actualProduct.price * actualProduct.quantity, \" \", \",00\"), React.createElement(\"span\", {\n        onClick: this.updateRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(Counter, {\n        isResume: true,\n        name: actualProduct.name,\n        price: actualProduct.price,\n        options: actualProduct.options,\n        extras: actualProduct.extras,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }))));\n    };\n\n    this.updateRequest = () => {\n      this.setState({\n        request: this.getItemLocalStorage()\n      });\n    };\n\n    this.sum = () => {\n      return this.state.request.products.reduce((LastSumProduct, actualProduct) => {\n        if (actualProduct.extras && actualProduct.extras.price) {\n          return (LastSumProduct + actualProduct.price + actualProduct.extras.price) * actualProduct.quantity;\n        }\n\n        return (LastSumProduct + actualProduct.price) * actualProduct.quantity;\n      }, 0);\n    };\n\n    this.sendRequestToFirebase = () => {\n      fire.firestore().collection(\"requests\").doc().set(_objectSpread({}, this.state.request, {\n        createdAt: moment().subtract(1, \"hours\").format(\"DD/MM/YYYY  HH:mm:ss\"),\n        status: \"toDo\"\n      })).then(() => {\n        localStorage.removeItem(\"request\");\n        this.setState({\n          show: true\n        });\n        setTimeout(() => {\n          this.setState({\n            show: false\n          });\n          this.props.history.push(\"/\");\n        }, 1700);\n      });\n    };\n  }\n\n  componentWillMount() {\n    this.updateRequest();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"resume-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"title-resume\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Resumo\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-request\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, this.loadProducts().length > 0 ? this.loadProducts() : \"O pedido está vazio!\"))), React.createElement(\"div\", {\n      className: \"resume-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"total\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \"Total: R$ \", this.sum(), \",00\"), React.createElement(\"button\", {\n      className: \"button-resume\",\n      disabled: !this.loadProducts().length,\n      onClick: this.sendRequestToFirebase,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Enviar pedido para a cozinha\")), React.createElement(SweetAlert, {\n      show: this.state.show,\n      type: \"success\",\n      title: \"Pedido Enviado\",\n      showConfirmButton: false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(Resume);","map":{"version":3,"sources":["/home/giovannasouto/Desktop/lab/SAP003-burger-queen/src/components/resume/resume.js"],"names":["React","Component","Counter","fire","withRouter","moment","SweetAlert","Resume","constructor","props","state","request","show","getItemLocalStorage","JSON","parse","localStorage","getItem","loadProducts","products","map","actualProduct","index","quantity","name","options","extras","price","updateRequest","setState","sum","reduce","LastSumProduct","sendRequestToFirebase","firestore","collection","doc","set","createdAt","subtract","format","status","then","removeItem","setTimeout","history","push","componentWillMount","render","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Counter from \"../counter/counter\";\nimport fire from \"../../config/firebase\";\nimport { withRouter } from \"react-router-dom\";\n\nimport moment from \"moment\";\nimport SweetAlert from \"sweetalert2-react\";\nimport \"./resume.css\";\n\nclass Resume extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      request: [],\n      show: false\n    };\n\n    this.getItemLocalStorage = () =>\n      JSON.parse(localStorage.getItem(\"request\"));\n\n    this.loadProducts = () => {\n      return this.state.request.products.map((actualProduct, index) => (\n        <li key={index} className=\"request-line\">\n          <div className=\"request-resume-container\">\n            {actualProduct.quantity}\n            {actualProduct.name}\n            <div>\n              {actualProduct.options\n                ? `'Hambúrguer' ${actualProduct.options}`\n                : \"\"}\n              {actualProduct.extras ? actualProduct.extras.name : \"\"}\n            </div>\n            R${\" \"}\n            {actualProduct.extras\n              ? actualProduct.price + actualProduct.extras.price\n              : actualProduct.price * actualProduct.quantity}{\" \"}\n            ,00\n          </div>\n          <span onClick={this.updateRequest}>\n            <Counter\n              isResume={true}\n              name={actualProduct.name}\n              price={actualProduct.price}\n              options={actualProduct.options}\n              extras={actualProduct.extras}\n            />\n          </span>\n        </li>\n      ));\n    };\n\n    this.updateRequest = () => {\n      this.setState({ request: this.getItemLocalStorage() });\n    };\n\n    this.sum = () => {\n      return this.state.request.products.reduce(\n        (LastSumProduct, actualProduct) => {\n          if (actualProduct.extras && actualProduct.extras.price) {\n            return (\n              (LastSumProduct +\n                actualProduct.price +\n                actualProduct.extras.price) *\n              actualProduct.quantity\n            );\n          }\n          return (\n            (LastSumProduct + actualProduct.price) * actualProduct.quantity\n          );\n        },\n        0\n      );\n    };\n\n    this.sendRequestToFirebase = () => {\n      fire\n        .firestore()\n        .collection(\"requests\")\n        .doc()\n        .set({\n          ...this.state.request,\n          createdAt: moment()\n            .subtract(1, \"hours\")\n            .format(\"DD/MM/YYYY  HH:mm:ss\"),\n          status: \"toDo\"\n        })\n        .then(() => {\n          localStorage.removeItem(\"request\");\n          this.setState({ show: true });\n          setTimeout(() => {\n            this.setState({ show: false });\n            this.props.history.push(\"/\");\n          }, 1700);\n        });\n    };\n  }\n\n  componentWillMount() {\n    this.updateRequest();\n  }\n\n  render() {\n    return (\n      <div className=\"resume-container\">\n        <div>\n          <h1 className=\"title-resume\">Resumo</h1>\n          <ul>\n            <div className=\"product-request\">\n              {this.loadProducts().length > 0\n                ? this.loadProducts()\n                : \"O pedido está vazio!\"}\n            </div>\n          </ul>\n        </div>\n        <div className=\"resume-footer\">\n          <h3 className=\"total\">Total: R$ {this.sum()},00</h3>\n          <button\n            className=\"button-resume\"\n            disabled={!this.loadProducts().length}\n            onClick={this.sendRequestToFirebase}\n          >\n            Enviar pedido para a cozinha\n          </button>\n        </div>\n        <SweetAlert\n          show={this.state.show}\n          type=\"success\"\n          title=\"Pedido Enviado\"\n          showConfirmButton={false}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Resume);\n"]},"metadata":{},"sourceType":"module"}